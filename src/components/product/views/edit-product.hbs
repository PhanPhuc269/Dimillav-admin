<div class="container-fluid pt-4 px-4 ">
    <div class="bg-secondary text-black rounded p-4">
    <h1 class="text-center mb-4">Update Product</h1>
    <form action="/product/update/{{product.slug}}" method="POST" enctype="multipart/form-data">
        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label for="name">Name:</label>
                    <input type="text" id="name" name="name" class="form-control" value="{{#if formData.name}}{{formData.name}}{{else}}{{product.name}}{{/if}}" />
                    {{#if errors.name}}
                        <div class="alert alert-danger">{{errors.name}}</div>
                    {{/if}}
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label for="category">Category:</label>
                    <input type="text" id="category" name="category" class="form-control" value="{{#if formData.category}}{{formData.category}}{{else}}{{product.category}}{{/if}}" />
                    {{#if errors.category}}
                        <div class="alert alert-danger">{{errors.category}}</div>
                    {{/if}}
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label for="price">Price:</label>
                    <input type="number" id="price" name="price" class="form-control" value="{{#if formData.price}}{{formData.price}}{{else}}{{product.price}}{{/if}}" />
                    {{#if errors.price}}
                        <div class="alert alert-danger">{{errors.price}}</div>
                    {{/if}}
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label for="quantity">Quantity:</label>
                    <input type="number" id="quantity" name="quantity" class="form-control" value="{{#if formData.quantity}}{{formData.quantity}}{{else}}{{product.quantity}}{{/if}}" />
                    {{#if errors.quantity}}
                        <div class="alert alert-danger">{{errors.quantity}}</div>
                    {{/if}}
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label for="type">Type:</label>
                    <input type="text" id="type" name="type" class="form-control" value="{{#if formData.type}}{{formData.type}}{{else}}{{product.type}}{{/if}}" />
                    {{#if errors.type}}
                        <div class="alert alert-danger">{{errors.type}}</div>
                    {{/if}}
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label for="brand">Brand:</label>
                    <input type="text" id="brand" name="brand" class="form-control" value="{{#if formData.brand}}{{formData.brand}}{{else}}{{product.brand}}{{/if}}" />
                    {{#if errors.brand}}
                        <div class="alert alert-danger">{{errors.brand}}</div>
                    {{/if}}
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label for="availibility">Availability:</label>
                    <select id="availibility" name="availibility" class="form-control" required>
                        <option value="In Stock" {{#if (eq product.availibility 'In Stock')}}selected{{/if}}>In Stock</option>
                        <option value="Out of Stock" {{#if (eq product.availibility 'Out of Stock')}}selected{{/if}}>Out of Stock</option>
                    </select>
                    {{#if errors.availibility}}
                        <div class="alert alert-danger">{{errors.availibility}}</div>
                    {{/if}}
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="form-group">
                    <label for="description">Description:</label>
                    <textarea id="description" name="description" class="form-control">{{#if formData.description}}{{formData.description}}{{else}}{{product.description}}{{/if}}</textarea>
                    {{#if errors.description}}
                        <div class="alert alert-danger">{{errors.description}}</div>
                    {{/if}}
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="form-group">
                    <label for="image">Image:</label>
                    <input type="file" id="image" name="image" class="form-control" />
                    {{#if errors.image}}
                        <div class="alert alert-danger">{{errors.image}}</div>
                    {{/if}}
                    <ul class="list-group mt-3">
                        {{#each product.images}}
                        <li class="list-group-item d-flex justify-content-between align-items-center" id="image-item-{{@index}}">
                            <span class="image-name text-primary" onclick="openImageModal('{{this}}')">{{getFileName this}}</span>
                            <button class="btn btn-sm btn-danger" type="button" onclick="removeImage(event, '{{@index}}')">X</button>
                        </li>
                        {{/each}}
                    </ul>
                </div>
            </div>
        </div>
        <!-- Stock Section -->
        <div class="row mt-4">
            <h5 class="text-center">Stock Information</h5>
            <div class="table-responsive">
                <table class="table text-start align-middle table-bordered table-hover mb-0">
                    <thead>
                        <tr class="text-black">
                            <th scope="col">Color</th>
                            <th scope="col">Size</th>
                            <th scope="col">Quantity</th>
                            <th scope="col">Action</th>
                        </tr>
                    </thead>
                    <tbody id="stock-table-body">
                        <!-- Rows will be added dynamically -->
                    </tbody>
                </table>
            </div>
            <div class="col-md-12 text-center mt-3">
                <button type="button" id="add-stock-entry-button" class="btn btn-secondary">Add Stock</button>
            </div>
        </div>
        <!-- End Stock Section -->
        <div class="row">
            <div class="col-md-12 text-center">
                <button type="submit" class="btn btn-success btn-lg mt-4">Update Product</button>
            </div>
        </div>
    </form>
    </div>
    <!-- Modal -->
    <div id="image-modal" class="modal">
        <span class="close" onclick="closeModal()">&times;</span>
        <img class="modal-content" id="modal-image">
    </div>

<!-- Modal Add Stock -->
<div class="modal fade" id="add-stock-modal" tabindex="-1" aria-labelledby="add-stock-modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Add Stock Entry</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="add-stock-form">
                    <div class="mb-3">
                        <label for="stock-color" class="form-label">Color</label>
                        <input type="text" id="stock-color" class="form-control" required />
                    </div>
                    <div class="mb-3">
                        <label for="stock-size" class="form-label">Size</label>
                        <input type="number" id="stock-size" class="form-control" min="0" required />
                    </div>
                    <div class="mb-3">
                        <label for="stock-quantity" class="form-label">Quantity</label>
                        <input type="number" id="stock-quantity" class="form-control" min="0" required />
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" id="save-stock-entry" class="btn btn-primary">Add</button>
            </div>
        </div>
    </div>
</div>
</div>
<script src="/js/edit-product.js">

</script>